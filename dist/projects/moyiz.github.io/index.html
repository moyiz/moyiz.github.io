<!doctype html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:og="http://ogp.me/ns#"
  lang=""
  xml:lang="">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="_src/build.sh" />
    <meta name="darkreader-lock" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes" />
           <meta name="description" content="Now is better than never. Although never is often better than *right* now." />
        <meta
      property="og:title"
      content="moyiz.github.io" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://moyiz.github.io/preview.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="400" />
    <meta property="og:image:height" content="200" />
    <meta property="og:image:alt" content="Logo" />
    <meta property="og:description" content="Now is better than never. Although never is often better than *right* now." />
    <meta name="color-scheme" content="only light" />

    <title>moyiz.github.io - moyiz</title>
    <style>
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          background-color: #232629;
          color: #7a7c7d;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
      div.sourceCode
        { color: #cfcfc2; background-color: #232629; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span { color: #cfcfc2; } /* Normal */
      code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
      code span.an { color: #3f8058; } /* Annotation */
      code span.at { color: #2980b9; } /* Attribute */
      code span.bn { color: #f67400; } /* BaseN */
      code span.bu { color: #7f8c8d; } /* BuiltIn */
      code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #3daee9; } /* Char */
      code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
      code span.co { color: #7a7c7d; } /* Comment */
      code span.cv { color: #7f8c8d; } /* CommentVar */
      code span.do { color: #a43340; } /* Documentation */
      code span.dt { color: #2980b9; } /* DataType */
      code span.dv { color: #f67400; } /* DecVal */
      code span.er { color: #da4453; text-decoration: underline; } /* Error */
      code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
      code span.fl { color: #f67400; } /* Float */
      code span.fu { color: #8e44ad; } /* Function */
      code span.im { color: #27ae60; } /* Import */
      code span.in { color: #c45b00; } /* Information */
      code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
      code span.op { color: #cfcfc2; } /* Operator */
      code span.ot { color: #27ae60; } /* Other */
      code span.pp { color: #27ae60; } /* Preprocessor */
      code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
      code span.sc { color: #3daee9; } /* SpecialChar */
      code span.ss { color: #da4453; } /* SpecialString */
      code span.st { color: #f44f4f; } /* String */
      code span.va { color: #27aeae; } /* Variable */
      code span.vs { color: #da4453; } /* VerbatimString */
      code span.wa { color: #da4453; } /* Warning */
    </style>
    <link rel="stylesheet" href="../../_src/css/layout.css" />
    <link rel="icon" type="image/x-icon" href="../../favicon.ico" />
    <!--dummy comment-->
    
    <script src="../../_src/js/state.js" defer></script>
  </head>
  <body>
    
    <div class="layout">
      <header class="header">
        <div>
          <img
            id="toggle-menu"
            class="icon"
            src="../../_src/icons/list.svg"
            onclick="toggleMenu(this)"
            alt="Toggle Menu" />
          |           <a href="index.html">[ ~/projects/moyiz.github.io/ ]</a>
           | moyiz.github.io | 
          <!--dummy comment-->
        </div>
        <div>
          <img
            id="toggle-narrower"
            class="icon"
            src="../../_src/icons/compress-wide.svg"
            onclick="toggleNarrower(this)"
            alt="Narrower View" />
          <img
            id="toggle-smaller"
            class="icon"
            src="../../_src/icons/arrows-to-line.svg"
            onclick="toggleSmaller(this)"
            alt="Smaller View" />
          <img
            id="toggle-invert"
            class="icon"
            src="../../_src/icons/moon-stars.svg"
            onclick="toggleInvert(this)"
            alt="Invert Colors" />
          |
          <a href="https://github.com/moyiz">
            <img
              class="icon"
              src="../../_src/icons/github.svg"
              alt="GitHub Profile" />
          </a>
        </div>
      </header>
      <div class="middle">
        <nav class="menu"><ul><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/index.html">~/</a><ul><li>posts/<ul><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/posts/test.html">test</a></li></ul></li><li>projects/<ul><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/projects/moyiz.github.io/index.html">moyiz.github.io/</a><ul><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/projects/moyiz.github.io/status.html">status</a></li><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/projects/moyiz.github.io/dev.html">dev</a></li></ul></li></ul></li><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/about.html">about</a></li><li><a href="/home/moyiz/workspace/moyiz.github.io2/dist/build.sh.html">build.sh</a></li></ul></li></ul></nav>
        <main class="content">
                    <!--dummy comment-->
          <div id="body">
                        <nav id="TOC" role="doc-toc">
                            <!--dummy comment-->
              <ul>
              <li><a href="#moyizgithubio"
              id="toc-moyizgithubio">moyiz.github.io</a>
              <ul>
              <li><a href="#features"
              id="toc-features">Features</a></li>
              <li><a href="#layout" id="toc-layout">Layout</a></li>
              <li><a href="#file-structure" id="toc-file-structure">File
              Structure</a>
              <ul>
              <li><a href="#repository-root"
              id="toc-repository-root">Repository root</a></li>
              <li><a href="#content" id="toc-content">content</a></li>
              <li><a href="#buildsh" id="toc-buildsh">build.sh</a></li>
              <li><a href="#scriptsgenerate_menupy"
              id="toc-scriptsgenerate_menupy">scripts/generate_menu.py</a></li>
              <li><a href="#templatespagehtml"
              id="toc-templatespagehtml">templates/page.html</a></li>
              <li><a href="#csslayoutcss"
              id="toc-csslayoutcss">css/layout.css</a></li>
              <li><a href="#filters" id="toc-filters">filters</a></li>
              </ul></li>
              <li><a href="#limitations"
              id="toc-limitations">Limitations</a></li>
              </ul></li>
              </ul>
            </nav>
             <h1 id="moyizgithubio">moyiz.github.io</h1>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>Most of the content on this page is subjected to possible changes. I
will try to keep it up-to-date with the progression of this site, but
dissimilarities might occur.</p>
</div>
<p>A micro-blog like site with an emphasis on simplicity.</p>
<h2 id="features">Features</h2>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />Content should be written
in markdown (preferably Github variant).</label></li>
<li><label><input type="checkbox" checked="" />A file-manager-like
sidebar to navigate.</label></li>
<li><label><input type="checkbox" checked="" />Underscore-prefixed
markdown files should be excluded from the sidebar.</label></li>
<li><label><input type="checkbox" checked="" />Dot-prefixed markdown
files should be excluded from the sidebar and be marked as
"draft".</label></li>
<li><label><input type="checkbox" checked="" />Simple, trivial and
predictable - black background, low line height and monospace
font.</label></li>
<li><label><input type="checkbox" />It should be conveniently readable
from terminal web browsers (<code>elinks</code>,
<code>lynx</code>).</label></li>
<li><label><input type="checkbox" />It should be conveniently readable
from mobile devices. Double-tap on content block to zoom once is
OK.</label></li>
<li><label><input type="checkbox" checked="" />No 3rd-party CSS
stylesheets or JS.</label></li>
<li><label><input type="checkbox" />Publishing and editing
timestamps.</label></li>
<li><label><input type="checkbox" checked="" />Publish via Github Action
when changes are pushed.</label></li>
<li><label><input type="checkbox" checked="" />Syntax highlighting in
code blocks.</label></li>
<li><label><input type="checkbox" checked="" />Styled markdown
alerts.</label></li>
<li><label><input type="checkbox" />Auto-publishing from other sources
(e.g. update projects documentation).</label></li>
<li><label><input type="checkbox" />Link GitHub Discussions to specific
pages to act as "comment sections".</label></li>
<li><label><input type="checkbox" />Support multiple
layouts.</label></li>
<li><label><input type="checkbox" checked="" />Color inversion toggle
(notice that "dark mode" is the default theme)</label></li>
<li><label><input type="checkbox" checked="" />Change view dimensions
(great when some browser plugins hide portions of the
viewport).</label></li>
<li><label><input type="checkbox" checked="" />Persist toggles state to
local / session storage.</label></li>
<li><label><input type="checkbox" />Support adding tags and viewing
pages by tags.</label></li>
<li><label><input type="checkbox" checked="" />Basic OpenGraph
support.</label></li>
<li><label><input type="checkbox" />When building, generate only changed
pages rather than all.</label></li>
<li><label><input type="checkbox" />Clean redundant html pages when
their markdown source no longer exists.</label></li>
</ul>
<p>At the time of writing, there is definitely more work to be done, but
I plan to progress with time.</p>
<p>Mainly for the fun of it, I have decided to not use any of the
plethora of static-site generators (e.g. <code>jekyll</code>,
<code>hugo</code>, <code>gatsbyjs</code>, <code>nanoc</code>) or builtin
themes, but to settle for good old <code>pandoc</code>, templates and
scriptology to build a solution around it.</p>
<p><code>pandoc</code> checks few boxes without interfering with others
and made its way to be the heart of this project. It is being used to
convert markdown to HTML (including code block syntax highlighting) and
it does that beautifully. With the correct HTML template, CSS stylesheet
and a custom generation script, it is more than enough for this
use-case.</p>
<h2 id="layout">Layout</h2>
<p>The site's chosen default layout is a variation of the <a
href="https://en.wikipedia.org/wiki/Holy_grail_(web_design)">Holy
Grail</a> with slight changes:</p>
<ul>
<li>No "ads" column.</li>
<li>Fixed one line header.</li>
<li>Fixed one line footer.</li>
<li>Fixed (toggle-able) menu.</li>
</ul>
<p>I initially planned to use HTML framesets, <a
href="https://html.com/frames/">but apparenty they are obsolete</a>. So
this layout is designed with <a
href="https://www.w3schools.com/css/css3_flexbox_container.asp">CSS
flexbox containers</a>.</p>
<h2 id="file-structure">File Structure</h2>
<h3 id="repository-root">Repository root</h3>
<p>Files and subdirectories in the repository root directory can be
divided into 3 categories:</p>
<ol type="1">
<li>GitHub related (i.e. GitHub Actions and <code>README.md</code>)</li>
<li>HTML pages representing actual content.</li>
<li>Source (<code>_src</code>).</li>
</ol>
<h3 id="content">content</h3>
<p>Contains the actual markdown files that will be converted to HTML
pages.</p>
<h3 id="buildsh">build.sh</h3>
<p>The core of the site generation is <a
href="build.sh.html"><code>_src/build.sh</code></a>. For a clean URL
experience, the HTML pages generation is targeting the root directory of
this repository.</p>
<p>All HTML pages not in <code>_src</code> are generated from markdown
files in <code>content</code> by <code>build.sh</code>. It does few
things:</p>
<ul>
<li>Collects paths of all markdown files under
<code>_src/content</code>.</li>
<li>Calls <code>_src/scripts/generate_menu.py</code> to generate the
HTML representation of the sidebar.</li>
<li>Collects page metadata.</li>
<li>Calls <code>pandoc</code> to generate the HTML pages.</li>
</ul>
<h3 id="scriptsgenerate_menupy">scripts/generate_menu.py</h3>
<p>An helper script that accepts a file containing a list of file paths.
It parses then outputs that list as a hierarchical nested HTML unordered
list of links to all non-excluded pages, where each level of nesting
corresponds to the depth of the directory in <code>content</code>.</p>
<p>If a file is named <code>index.md</code>, it will be omitted from the
menu and be added as a link target of the containing directory
entry.</p>
<p>Files beginning with a dot or underscore are excluded from the
generated menu.</p>
<h4 id="example">Example</h4>
<p><strong>Input</strong>: A path to a file containing:</p>
<pre><code>posts/test.md
projects/proj1/index.md
projects/proj1/design.md
projects/proj2/index.md
a b.md
.bla.md</code></pre>
<p><strong>Output</strong>:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>posts/</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;posts/test.html&quot;</span><span class="dt">&gt;</span>test<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>projects/</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;projects/proj1/index.html&quot;</span><span class="dt">&gt;</span>proj1/<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;projects/proj1/design.html&quot;</span><span class="dt">&gt;</span>design<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;projects/proj2/index.html&quot;</span><span class="dt">&gt;</span>proj2/<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a> <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href</span><span class="op">=</span><span class="st">&quot;a b.html&quot;</span><span class="dt">&gt;</span>a b<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span></code></pre></div>
<h3 id="templatespagehtml">templates/page.html</h3>
<p>Contains the page template and the accompanied CSS stylesheet.</p>
<h3 id="csslayoutcss">css/layout.css</h3>
<p>Initially generated from <code>$styles.html()$</code> substitution in
HTML template. Notable changes:</p>
<ul>
<li>Layout related.</li>
<li>Markdown alerts (<code>.note</code>, <code>.important</code>,
<code>.warning</code>).</li>
<li>Icon related.</li>
</ul>
<h3 id="filters">filters</h3>
<p>Contains <code>pandoc</code> lua filters. Applied during page
generation on the target document elements.</p>
<ul>
<li><code>link.lua</code> - Converts links that target markdown files
into their HTML counterparts.</li>
<li><code>title.lua</code> - Promotes the first header to the page's
title if it is not defined.</li>
</ul>
<h2 id="limitations">Limitations</h2>
<p>Generated HTML pages are not tracked in any way. Thus, renaming or
removing markdown would not be reflected on existing HTML pages.</p>
          </div>
        </main>
      </div>
      <footer class="footer">
        S: projects/moyiz.github.io/index.md | L: 175 | W:
        853 | C: 5634
        | RT: &lt;4min
      </footer>
    </div>
    
  </body>
</html>
